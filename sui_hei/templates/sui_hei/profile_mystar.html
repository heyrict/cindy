{% extends 'frames/base.html' %} 
{% load i18n static markdown decodes %}

{% block title %} cindy - profile - mysoup {% endblock %} 

{% block child_navi %}
{% include 'frames/profile_child_navi.html' %}
{% endblock %}

{% block script %}
$(".remove_star_button").on("click", function () {
  var csrftoken = $("[name=csrfmiddlewaretoken]").val();
  if (confirm("{% trans 'You cannot revert change if you delete the star!' %}\n{% trans 'Continue?' %}")) {
    jQuery.post(
      "{% url 'sui_hei:mondai_star_remove' %}",
      {
        csrfmiddlewaretoken: csrftoken,
        star_id: this.value,
      },
      function(data) {
        if (data) {
          location.reload();
        }
      }
    );
  }
});
{% endblock %}

{% block content %}
<h2>{% trans 'MyStar' %}</h2>

{% include 'frames/pagination.html' with id_prefix='star' %}

{% for star in star_list %}
<ul>
<li>
    <span class="status_label unsolved"><font color="#cb4b16">{{ star.value|normalize_star }}</font></span>

    {% if star.user_id == user %}
    <button class="remove_star_button" style="padding:inherit;background:inherit;color:red;" value={{ star.id }}>⛔</button>
    {% endif %}

    <span class="title_label">
        <a href="{% url 'sui_hei:mondai_show' star.mondai_id.id %}">{{ star.mondai_id.title }} </a>
    </span>

    {% if star.mondai_id.score > 0 or star.mondai_id.user_id == user and star.mondai_id.star_set.count > 0 %}
    <span class="mondai_score">
        {{ star.mondai_id.score|normalize_star }}✯{{ star.mondai_id.star_set.count }}
    </span>
    {% endif %}

    <span style="float:right; text-decoration:bold;">
    {% trans 'Giver' %}: 
    <b><a href="{% url 'sui_hei:profile' star.mondai_id.user_id.id %}">{{ star.mondai_id.user_id.nickname }}</a>
        {% if star.mondai_id.user_id.current_award %}[{{ star.mondai_id.user_id.current_award }}]{% endif %}</b>
    [{% trans 'created' %}: {{ star.mondai_id.created }}]
    </span>
</li>
</ul>
{% endfor %}
<div class="clear"></div>
{% endblock %}
